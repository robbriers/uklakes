<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Using the uklakes package â€¢ uklakes</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using the uklakes package">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">uklakes</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/uklakes.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/uklakes_output_ref.html">uklakes: details of output columns</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Using the uklakes package</h1>
            
      

      <div class="d-none name"><code>uklakes.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <a href="https://uklakes.ceh.ac.uk/" class="external-link">UK CEH Lake Portal</a> is a
GIS-based inventory of information about more than 40000 lakes across
the UK. The information available for each lake varies, but includes
basic physical description, typology and other information.</p>
<p>The <code>uklakes</code> package allows you to retrieve a summary of
the lake information for a lake or series of lakes, based on the lake
wbid (waterbody id) number. It does this by responsibly webscraping the
information <a href="https://cran.r-project.org/package=polite" class="external-link">polite
package</a>) from the webpage of each lake.</p>
<p>You can also search for lake wbid values based on strings in the lake
name to determine the wbids to search for.</p>
<p>Information on the general physical characteristics, typology,
chemistry and connectivity metrics are retrieved. Biology, land cover
and water quality information are not. For details of the information
available, see the <a href="https://uklakes.ceh.ac.uk/" class="external-link">UK Lakes Portal
Website</a>, or the <a href="../articles/uklakes_output_ref.html">output
reference list</a>.</p>
<p>Use of the package implies acceptance of the Terms of Use available
<a href="https://www.ceh.ac.uk/terms-of-use" class="external-link">here</a>.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the current version of uklakes from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"robbriers/uklakes"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h2>
<div class="section level3">
<h3 id="search-for-wbid-numbers">Search for wbid numbers<a class="anchor" aria-label="anchor" href="#search-for-wbid-numbers"></a>
</h3>
<p>The <code>search_lakes</code> function allows you to search a listing
of all the lakes within the portal, based on a string provided. It will
return a dataframe containing the name and wbid number of all the lakes
that contain (full or partial match, case sensitive) the string
provided. Note that most of the small within the portal (particularly
the small ones) do not have a name (76% of total).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://robbriers.github.io/uklakes/">uklakes</a></span><span class="op">)</span></span>
<span><span class="va">all_tarns</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_lakes.html">search_lakes</a></span><span class="op">(</span><span class="st">"Tarn"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">all_tarns</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 140</span></span>
<span><span class="co"># 140 Tarns in the portal database</span></span>
<span></span>
<span><span class="co"># first six tarns in the list</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">all_tarns</span><span class="op">)</span></span>
<span><span class="co">#&gt;               Name  wbid</span></span>
<span><span class="co">#&gt; 1      Tarnie Loch 23031</span></span>
<span><span class="co">#&gt; 2      Talkin Tarn 28386</span></span>
<span><span class="co">#&gt; 3     Tindale Tarn 28395</span></span>
<span><span class="co">#&gt; 4      Martin Tarn 28561</span></span>
<span><span class="co">#&gt; 5        Tarns Dub 28651</span></span>
<span><span class="co">#&gt; 6 Greencastle Tarn 28736</span></span>
<span></span>
<span><span class="fu"><a href="../reference/search_lakes.html">search_lakes</a></span><span class="op">(</span><span class="st">"Leven"</span><span class="op">)</span></span>
<span><span class="co">#&gt;                Name  wbid</span></span>
<span><span class="co">#&gt; 1 Loch of Levenwick  1567</span></span>
<span><span class="co">#&gt; 2        Loch Leven 18194</span></span>
<span><span class="co">#&gt; 3        Loch Leven 24843</span></span>
<span><span class="co"># two Loch Levens and one Loch of Levenwick</span></span></code></pre></div>
<p>The wbid column of the dataframe returned can be used as input to the
data retrieval function (see below for examples).</p>
</div>
<div class="section level3">
<h3 id="get-a-summary-of-information-for-a-lake-or-lakes">Get a summary of information for a lake or lakes<a class="anchor" aria-label="anchor" href="#get-a-summary-of-information-for-a-lake-or-lakes"></a>
</h3>
<p>The <code>get_lake_info</code> function retrieves the available
information for a lake or lakes, based on the wbid numbers provided.</p>
<p>Wbid numbers can be passed to the function as a single integer, a
series of integer values, a sequence of values, a vector of values
(either as a specific object or as a column of a dataframe) or a
combination of these. See examples below.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Loch Lomond</span></span>
<span><span class="fu"><a href="../reference/get_lake_info.html">get_lake_info</a></span><span class="op">(</span><span class="fl">24447</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># some small lakes in Shetland</span></span>
<span><span class="fu"><a href="../reference/get_lake_info.html">get_lake_info</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">9</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># a series of small lakes in Shetland</span></span>
<span><span class="fu"><a href="../reference/get_lake_info.html">get_lake_info</a></span><span class="op">(</span><span class="fl">1232</span><span class="op">:</span><span class="fl">1238</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># the first 5 Tarns in the database</span></span>
<span><span class="co">#tarns &lt;- search_lakes("Tarn")</span></span>
<span><span class="va">five_tarns</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_lake_info.html">get_lake_info</a></span><span class="op">(</span><span class="va">all_tarns</span><span class="op">$</span><span class="va">wbid</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>The range of information provided varies widely between lakes. Basic
physical description and typology information are always returned. For a
full listing of the possible columns see the <em>output reference</em>
listing.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># information from the first 5 Tarns in the database</span></span>
<span><span class="co">#tarns &lt;- search_lakes("Tarn")</span></span>
<span><span class="va">five_tarns</span></span>
<span><span class="co">#&gt;    wbid         Name Grid_reference Easting Northing Elevation_type  Size_type</span></span>
<span><span class="co">#&gt; 1 23031  Tarnie Loch     NO65155437  365150   754370  Low elevation Very small</span></span>
<span><span class="co">#&gt; 2 28386  Talkin Tarn     NY54545875  354540   558750  Low elevation      Small</span></span>
<span><span class="co">#&gt; 3 28395 Tindale Tarn     NY60525871  360520   558710  Mid elevation      Small</span></span>
<span><span class="co">#&gt; 4 28561  Martin Tarn     NY25795154  325790   551540  Low elevation Very small</span></span>
<span><span class="co">#&gt; 5 28651    Tarns Dub     NY11534738  311530   547380  Low elevation Very small</span></span>
<span><span class="co">#&gt;     Depth_type          Geology_type            Humic_type Marl_water_body</span></span>
<span><span class="co">#&gt; 1 Very shallow Unavailable (no data) Unavailable (no data)           FALSE</span></span>
<span><span class="co">#&gt; 2      Shallow             Marl lake Unavailable (no data)            TRUE</span></span>
<span><span class="co">#&gt; 3 Very shallow   Moderate alkalinity                 Humic           FALSE</span></span>
<span><span class="co">#&gt; 4      Shallow       High alkalinity Unavailable (no data)           FALSE</span></span>
<span><span class="co">#&gt; 5      Shallow       High alkalinity Unavailable (no data)           FALSE</span></span>
<span><span class="co">#&gt;   Surface_area Elevation Perimeter_length Shoreline_development_index</span></span>
<span><span class="co">#&gt; 1            0       121                0                        1.29</span></span>
<span><span class="co">#&gt; 2           25       128                2                        1.17</span></span>
<span><span class="co">#&gt; 3           25       214                2                        1.25</span></span>
<span><span class="co">#&gt; 4            5        18                1                        1.06</span></span>
<span><span class="co">#&gt; 5            8        18                1                        1.06</span></span>
<span><span class="co">#&gt;   Fetch_distance Distance_to_sea Mean_depth Maximum_depth Catchment_area</span></span>
<span><span class="co">#&gt; 1           0.11            3.61         NA            NA             NA</span></span>
<span><span class="co">#&gt; 2           0.77           18.35        5.0          12.5            106</span></span>
<span><span class="co">#&gt; 3           0.87           24.11        1.9           4.2            804</span></span>
<span><span class="co">#&gt; 4           0.28            4.41        5.0            NA             32</span></span>
<span><span class="co">#&gt; 5           0.36            2.95        5.1            NA             83</span></span>
<span><span class="co">#&gt;   Water_body_volume Catchment-to-lake_ratio Catchment_mean_elevation</span></span>
<span><span class="co">#&gt; 1                NA                      NA                       NA</span></span>
<span><span class="co">#&gt; 2           1274563                     4.1                   141.66</span></span>
<span><span class="co">#&gt; 3            474201                    32.4                   376.98</span></span>
<span><span class="co">#&gt; 4            243692                     6.5                    22.56</span></span>
<span><span class="co">#&gt; 5            436432                     9.7                    31.22</span></span>
<span><span class="co">#&gt;   Catchment_mean_slope Catchment_strahler_1_length 2km_buffer_river_length</span></span>
<span><span class="co">#&gt; 1                   NA                          NA                      NA</span></span>
<span><span class="co">#&gt; 2                 2.80                      166.04                21784.86</span></span>
<span><span class="co">#&gt; 3                 9.62                     6750.08                18732.34</span></span>
<span><span class="co">#&gt; 4                 1.78                      303.90                22983.18</span></span>
<span><span class="co">#&gt; 5                 2.42                          NA                16673.16</span></span>
<span><span class="co">#&gt;   Mean_alkalinity Mean_conductivity Catchment_strahler_2_length</span></span>
<span><span class="co">#&gt; 1              NA                NA                          NA</span></span>
<span><span class="co">#&gt; 2             681               121                          NA</span></span>
<span><span class="co">#&gt; 3             892               140                     3472.66</span></span>
<span><span class="co">#&gt; 4              NA                NA                      149.75</span></span>
<span><span class="co">#&gt; 5              NA                NA                          NA</span></span>
<span><span class="co">#&gt;   Catchment_strahler_4_plus_length Catchment_obstacles_count Mean_colour</span></span>
<span><span class="co">#&gt; 1                               NA                        NA          NA</span></span>
<span><span class="co">#&gt; 2                               NA                        NA          NA</span></span>
<span><span class="co">#&gt; 3                            19.84                         4          51</span></span>
<span><span class="co">#&gt; 4                               NA                        NA          NA</span></span>
<span><span class="co">#&gt; 5                            54.38                        NA          NA</span></span>
<span><span class="co">#&gt;   Mean_dissolved_organic_carbon 2km_buffer_canals_length</span></span>
<span><span class="co">#&gt; 1                            NA                       NA</span></span>
<span><span class="co">#&gt; 2                            NA                       NA</span></span>
<span><span class="co">#&gt; 3                          6.37                       NA</span></span>
<span><span class="co">#&gt; 4                            NA                       46</span></span>
<span><span class="co">#&gt; 5                            NA                       NA</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rob Briers.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
